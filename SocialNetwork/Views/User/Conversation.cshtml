@{
    ViewBag.Title = "Conversation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Scripts.Render("~/bundles/custom")

<h2>Новое сообщение</h2>

<div class="main">
    <div class="row">
        <div id="chatBody" class="col-md-8 col-sm-8 col-xs-12">
            <div id="header">
                <h3>Добро пожаловать, @ViewBag.SenderName</h3>
            </div>
            <br />
            <div id="messagelist" style="overflow: auto">
                <ul id="chatroom"></ul>
            </div>
            <br />
            <div id="inputForm">
                <input type="text" class="form-control" id="message" />
                <input type="button" class="btn btn-default" id="sendmessage" value="Отправить" />
            </div>
            <hr />
            <div id="chatusers">
                <p>
                    <b>Получатель:</b>
                </p>
                <p>
                    <b id="conversationName">@ViewBag.RecipientsNames</b>
                </p>
            </div>
        </div>
        <div id="users" style="overflow: auto; height: 500px" class="col-md-4 col-sm-4 col-xs-6" align="right">
            <h3>Друзья<span style="display:inline-block; width: 90px;"></span></h3><br/>
        </div>
    </div>
    <input id="hdId" type="hidden"/>
</div>

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        var util = new Util(@ViewBag.ConversationId);
    </script>
}